create table Employee (
Eid varchar(30),
Ename varchar(40),
City varchar(20),
Status varchar(10),
Age int,
primary key (Eid)
);
desc Employee;

insert into Employee values("E1", "Smith", "London", "Senior", 52);
insert into Employee values("E2", "Jones", "Paris", "Junior", 23);
insert into Employee values("E3", "James", "New York", "Senior", 34);
insert into Employee values("E4", "Blake", "Chicago", "Senior", 36);
insert into Employee values("E5", "John", "Rome", "Junior", 31);
insert into Employee values("E6", "David", "London", "Junior", 18);
insert into Employee values("E7", "Adams", "Paris", "Senior", 43);
insert into Employee values("E8", "Bill", "Athens", "Senior", 42);
select * from Employee;


create table Project (
Pid varchar(30),
Pname varchar(40),
Budget int,
Manager_id varchar(20),
primary key(Pid)
);
desc Project;

insert into Project(Pid, Pname, Budget, Manager_id) values 
("P1", "P", 1, "M_5"),
("P2", "Product Y", 1, "M_2"),
("P3", "Computerization", 3, "M_8"),
("P4", "Reorganization", 2, "M_9"),
("P5", "New benefits", 1, "M_1");
select * from Project;


create table Works(
Eid varchar(30),
Pid varchar(30),
W_hour int,
primary key(Eid,Pid),
foreign key(Eid) references Employee(Eid) on delete cascade,
foreign key(Pid) references Project(Pid) on delete cascade
);

insert into Works(Eid, Pid, W_hour) values
("E1", "P1", 6),
("E6", "P1", 6),
("E2", "P3", 4),
("E4", "P1", 5),
("E5", "P4", 3),
("E8", "P5", 9),
("E3", "P2", 6),
("E4", "P3", 7),
("E7", "P1", 4);
select * from Works;


update Project
set Pname = "Project X"
where Pname = "P";
select * from Project;


insert into Employee(Eid, Ename, City, Status, Age) values ("E9", "Clark", "Paris", "Senior", 30);
select * from Employee;


DELETE
FROM Employee
WHERE Age > 50;
select * from Employee;


select * from Project;


select Employee.Ename
from Employee, Project, Works
where Employee.Eid = Works.Eid
and Works.Pid = Project.Pid
and Project.Budget > 2;


select Manager_id
from Project
where Budget = (select MAX(Budget) from Project);


select Employee.Ename, Employee.City
from Employee, Project, Works
where Employee.Eid = Works.Eid
and Project.Pid = Works.Pid
and Project.Pname = "Computerization";


select Eid, MAX(W_hour)
from Works
group by Eid;


update Employee
set Status = "Junior"
where City = "Athens";
select * from Employee;


select Pid, count(Eid)
from Works
group by Pid;


select Employee.Ename
from Employee, Works, Project
where Employee.Eid = Works.Eid
and Project.Pid = Works.Pid
and Project.Pid <> "P5";


select Employee.Ename
from Employee, Works, Project
where Employee.Eid = Works.Eid
and Project.Pid = Works.Pid
and Project.Pid != "P5";


delete Employee.*
from Employee, Works, Project
where Employee.Eid = Works.Eid
and Project.Pid = Works.Pid
and Project.Pname = "Reorganization";;*
from Employee, Works, Project
where Employee.Eid = Works.Eid
and Project.Pid = Works.Pid
and Project.Pname = "Reorganization";